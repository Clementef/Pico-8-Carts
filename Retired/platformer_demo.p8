pico-8 cartridge // http://www.pico-8.com
version 35
__lua__
camera_easing = 0.3
room_size = 128
base_input_delay = 10
input_delay=0
allow_input=true
r_x = 0 r_y = 0
t_x = 0 t_y = 0
f_x = 0 f_y = 0
x = 0 y = 0
function _update()
		//left
  if (btn(0) and allow_input==true)
  then r_x=r_x-1
  allow_input=false
  input_delay=base_input_delay
  end
		//right
  if (btn(1) and allow_input==true)
  then r_x=r_x+1
  allow_input=false
  input_delay=base_input_delay
  end
  //up
  if (btn(2) and allow_input==true)
  then r_y=r_y-1
  allow_input=false
  input_delay=base_input_delay
  end
  //down
  if (btn(3) and allow_input==true)
  then r_y=r_y+1
  allow_input=false
  input_delay=base_input_delay
  end
  
  //countdown input delay
  if (input_delay>0) then
  		input_delay-=1
  		if (input_delay==0) then
  				allow_input=true
  		end
  end
  
  //lerp absolute camera locaiton
 	t_x = r_x*room_size
 	t_y = r_y*room_size
  f_x=lerp(f_x,t_x,camera_easing)
 	f_y=lerp(f_y,t_y,camera_easing)
 	x=ceil(f_x)
 	y=ceil(f_y)
end
 
function _draw()
  cls(5)
  //print map to screen and reset camera
  camera(x,y)
  map(0, 0, 0, 0, 128, 32)
  camera()
  
  //print camera coords
  print('abs coords: ('..x..', '..y..')', 2, 2, 7)
		print('room coords: ('..r_x..', '..r_y..')', 2, 9, 7)

end
-->8
function lerp(a,b,t)
	result = (a+(b-a)*t)
	if (abs(b-result)<0.5) then
		result=b
	end
	return result
end
__gfx__
00000000777777777777777777777777777777777777777777777777000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000770000000000000000000000770000007000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000770000000000000000000000770000007000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000770000000000000000000000770000007000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000770000000000000000000000770000007000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000770000000000000000000000770000007000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000770000000000000000000000770000007000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000777777777777777777777777770000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000755555555555555557777777770000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000751111115588888857000000070000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000751111115588888857000000070000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000751111115588888857000000070000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000751111115588888857000000070000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000751111115588888857000000070000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000751111115588888857000000070000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000755555555555555557000000070000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000700000000000000000000000070000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000700000000000000000000000070000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000700000000000000000000000070000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000700000000000000000000000070000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000700000000000000000000000070000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000700000000000000000000000070000007000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000700000000000000000000000070000007000000000000000000000000000000000000000000000000000000000000000000000000
77777777777777777777777700000000000000000000000077777777000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1501010101010101010101010101010215010101010101010101010101010102000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212220212121212121212121212121212122000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1501010101010101010101010101010215010101010101010101010101010102000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001210000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2021212121212121212121212121212220212121212121212121212121212122000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
