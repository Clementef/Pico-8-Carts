pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
-- hi i am chloe

local player
local health
local hurt
local hearts

function _init()
 hurt=2
  player={
  x=64,
  y=64,
  width=6,
  height=6,
  speed=2,
  vertically_aligned=false,
  horizontally_aligned=false,
   update=function(self)
    if btn(1) then 
     self.x+=self.speed 
    end
    if btn(0) then 
     self.x-=self.speed 
    end
    if btn(3) then
     self.y+=self.speed
    end
    if btn(2) then
     self.y-=self.speed
    end
   end,
  draw=function(self)
   if (hurt==0) then
    spr(0,self.x,self.y)
   end
   if (hurt==1) then
    spr(1,self.x,self.y)
   end
   if (hurt==2) then
    spr(2,self.x,self.y)
   end
   if (hurt==3) then
    spr(3,self.x,self.y)
   end
   -- rect(self.x+1,self.y+1,self.x+1+self.width,self.y+1+self.height,7)
   -- print(self.vertically_aligned,self.x+10,self.y,7)
   -- print(self.horizontally_aligned,self.x+10,self.y+7,7)
  end,
  check_collision=function(self,heart)
   local player_top=self.y+1
    local player_bottom=self.y+1+self.height
    local player_left=self.x+1
    local player_right=self.x+1+self.width
    if player_left<=heart.x+6 and player_right>=heart.x+1 then
     self.vertically_aligned=true
    else
     self.vertically_aligned=false
    end
    if player_top<=heart.y+5 and player_bottom>=heart.y+2 then
     self.horizontally_aligned=true
    else
     self.horizontally_aligned=false
    end
     if self.horizontally_aligned and self.vertically_aligned and not heart.collected then
     heart.collected=true
     hurt-=1
    end
  end
  }
  hearts={
   make_heart(10,10),
   make_heart(50,20),
   make_heart(90,90)
  }


 health={
  draw=function(self)
   if (hurt==0) then
    spr(58,3,3)
    spr(59,11,3)
    spr(60,19,3)
    spr(61,27,3)
    spr(62,35,3)
   end
   if (hurt==1) then
    spr(53,3,3)
    spr(54,11,3)
    spr(55,19,3)
    spr(56,27,3)
    spr(57,35,3)
   end
   if (hurt==2) then
    spr(48,3,3)
    spr(49,11,3)
    spr(50,19,3)
    spr(51,27,3)
    spr(52,35,3)
   end
   if (hurt==3) then
    spr(42,3,3)
    spr(43,11,3)
    spr(44,19,3)
    spr(45,27,3)
    spr(46,35,3)
   end
  end
 }
end

function _update60()
 player:update()
 local heart
 for heart in all(hearts) do
  heart:update()
  player:check_collision(heart)
 end
end

function _draw()
	cls(0)
 player:draw()
 health:draw()
 local heart
for heart in all(hearts) do
 heart:draw()
end
 rect(1,1,127,127,7)
end

function make_heart(x,y)
 local heart={
  x=x,
  y=y,
  collected=false,
  update=function(self)
  end,
  draw=function(self)
   if not self.collected then
   spr(32,self.x,self.y)
    -- rect(self.x+1,self.y+2,self.x+6,self.y+5,7)
   end
  end
 }
 return heart
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
04444440044444400444444005555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
04444440044444400484444005855550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0444f0f00444f0f00484f0f005856860000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
044ffff0044ff8f0048ff8f005866860000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000f7700000f7700080f77000806770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000fff00000fff00000ff8000006680000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000008000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06777070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000777777777777777777777777777777777777770000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000700000000000000000000000000000000000070000000000
088088e0000000000000000000000000000000000000000000000000000000000000000000000000700700707770070055055105505510550551070000000000
088888e0000000000000000000000000000000000000000000000000000000000000000000000000700777707007000055555105555510555551070000000000
00888e00000000000000000000000000000000000000000000000000000000000000000000000000700700707770070005551000555100055510070000000000
0008e000000000000000000000000000000000000000000000000000000000000000000000000000700700707000000000510000051000005100070000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000700000000000000000000000000000000000070000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000777777777777777777777777777777777777770000000000
77777777777777777777777777777777777777007777777777777777777777777777777777777700777777777777777777777777777777777777770000000000
70000000000000000000000000000000000007007000000000000000000000000000000000000700700000000000000000000000000000000000070000000000
700700707770070088088e055055105505510700700700707770070088088e088088e05505510700700700707770070088088e088088e088088e070000000000
700777707007000088888e055555105555510700700777707007000088888e088888e05555510700700777707007000088888e088888e088888e070000000000
70070070777007000888e000555110055510070070070070777007000888e000888e00055510070070070070777007000888e000888e000888e0070000000000
7007007070000000008e000005100000510007007007007070000000008e000008e00000510007007007007070000000008e000008e000008e00070000000000
70000000000000000000000000000000000007007000000000000000000000000000000000000700700000000000000000000000000000000000070000000000
77777777777777777777777777777777777777007777777777777777777777777777777777777700777777777777777777777777777777777777770000000000
